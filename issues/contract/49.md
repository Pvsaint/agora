# Issue 49: Enforce ticket supply checks in Payment contract

### DESCRIPTION

> **The Payment contract must act as a gatekeeper for event attendance.** It should query the Registry's inventory data before finalizing any financial transaction. This prevents guests from paying for tickets that no longer exist due to high demand.

### TASKS

- [ ] **Call `get_event_inventory`** at the beginning of the `process_payment` flow.
- [ ] **Compare `current_supply` against `max_supply`** and revert if the requested tickets would exceed the limit.
- [ ] **Execute the `increment_inventory` cross-contract call** only after the USDC transfer has been successfully verified.
- [ ] **Handle race conditions** by ensuring the inventory is updated atomically within the same transaction.

**Depends on:**
#48
